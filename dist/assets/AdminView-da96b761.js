import"./index.min-e0ab316a.js";import{t as $,o as n,c as i,a as t,b as l,d as U,w as u,v as p,i as A,F as j,e as S,f as E,g as N,n as D,r as y,h as L,j as w,k as O,l as x,m as q}from"./index-1b63a83b.js";const F={class:"modal fade fixed top-0 left-0 hidden w-full h-full outline-none overflow-x-hidden overflow-y-auto",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},I={class:"modal-dialog modal-xl relative w-auto pointer-events-none"},J={class:"mod al-content productModal-content"},R={class:"modal-header productModal-header"},T={key:0,class:"productModal-header-h5",id:"exampleModalLabel"},z={key:1,class:"productModal-header-h5",id:"exampleModalLabel"},G=t("button",{type:"button",class:"productModal-btn-close text-gray-200","data-bs-dismiss":"modal","aria-label":"Close"},[t("i",{class:"fa-solid fa-xmark"})],-1),H={class:"modal-body relative p-4"},K={class:"grid grid-cols-3 gap-4"},Q=t("label",{for:"js-imageUrl",class:"productModal-label"},"主圖網址:",-1),W=["src"],X={class:"productModal-image-group"},Y=t("h1",{class:"text-4xl"},"新增圖片",-1),Z={class:"grid grid-flow-col gap-4"},tt={class:"flex"},st={class:"mt-4 flex justify-end"},ot=["onClick"],et=t("i",{class:"fa-solid fa-xmark text-2xl"},null,-1),lt=[et],at=["src"],dt={class:"col-span-2"},nt={class:"col-span-2"},it=t("label",{for:"js-title",class:"productModal-label"},"商品名稱:",-1),ct={class:"grid grid-cols-2 gap-2"},rt=t("label",{for:"js-category",class:"productModal-label"},"分類:",-1),ut=t("label",{for:"js-unit",class:"productModal-label"},"單位:",-1),pt={class:"grid grid-cols-2 gap-2"},_t=t("label",{for:"js-price",class:"productModal-label"},"售價:",-1),bt=t("label",{for:"js-origin-price",class:"productModal-label"},"原價:",-1),mt=t("div",{class:"col-span-2 w-full my-4 h-[1px] content-none bg-slate-200"},null,-1),ht={class:"col-span-2"},gt=t("label",{for:"js-description",class:"productModal-label"},"商品敘述:",-1),vt={class:"col-span-2"},ft=t("label",{for:"js-content",class:"productModal-label"},"說明內容：",-1),yt=t("label",{for:"js-isEnabled",class:"productModal-label"},"是否啟用：",-1),xt={class:"modal-footer productModal-footer"},kt=t("button",{type:"button",class:"btn-primary-cancel","data-bs-dismiss":"modal","aria-label":"Close"},"取消",-1),Mt={__name:"ProductModal",props:{product:Object,modalStatus:String},emits:["update"],setup(k,{emit:m}){const h=k,s=$(h,"product"),b=$(h,"modalStatus");let c="";const g=d=>{d!==""&&(s.value.imagesUrl?(s.value.imagesUrl.push(d),c=""):(s.value.imagesUrl=[],s.value.imagesUrl.push(d),c=""))},a=d=>{s.value.imagesUrl.splice(d,1)},_=()=>{const d=s.value.title===void 0,e=s.value.category===void 0,o=s.value.unit===void 0,f=s.value.price===void 0&&typeof s.value.price=="number",M=s.value.origin_price===void 0&&typeof s.value.origin_price=="number",P=s.value.description===void 0,C=s.value.content===void 0,V=s.value.imageUrl===void 0,B=s.value.is_enabled===void 0;return d||e||o||f||M||P||C||V||B},r=(d,e)=>{N({data:d},e).then(()=>{alert("產品更新成功"),m("update")}).catch(o=>{console.log(o)})},v=d=>{const e=d;_()?alert("請填寫完整資訊"):e.imagesUrl||(e.imagesUrl=[],D({data:d}).then(o=>{console.log(o),alert("產品新增成功!"),m("update")}).catch(o=>{console.log(o)}))};return(d,e)=>(n(),i("div",F,[t("div",I,[t("div",J,[t("div",R,[l(b)==="editProduct"?(n(),i("h5",T," 編輯產品 ")):l(b)==="newProduct"?(n(),i("h5",z," 新增產品 ")):U("",!0),G]),t("div",H,[t("div",K,[t("div",null,[Q,u(t("input",{class:"productModal-input","onUpdate:modelValue":e[0]||(e[0]=o=>l(s).imageUrl=o),id:"js-imageUrl"},null,512),[[p,l(s).imageUrl]]),t("img",{src:l(s).imageUrl,alt:"",class:"w-1/2 mt-4"},null,8,W),t("div",X,[Y,t("div",Z,[u(t("input",{type:"text",class:"productModal-input","onUpdate:modelValue":e[1]||(e[1]=o=>A(c)?c.value=o:c=o)},null,512),[[p,l(c)]]),t("div",tt,[t("button",{type:"button",class:"btn-primary",onClick:e[2]||(e[2]=o=>g(l(c)))},"新增")])]),(n(!0),i(j,null,S(l(s).imagesUrl,(o,f)=>(n(),i("div",{key:o},[t("div",st,[t("button",{type:"button",onClick:M=>a(f)},lt,8,ot)]),t("img",{src:o,class:"object-cover",alt:""},null,8,at)]))),128))])]),t("div",dt,[t("div",nt,[it,u(t("input",{class:"productModal-input","onUpdate:modelValue":e[3]||(e[3]=o=>l(s).title=o),id:"js-title"},null,512),[[p,l(s).title]])]),t("div",ct,[t("div",null,[rt,u(t("input",{class:"productModal-input","onUpdate:modelValue":e[4]||(e[4]=o=>l(s).category=o),id:"js-category"},null,512),[[p,l(s).category]])]),t("div",null,[ut,u(t("input",{class:"productModal-input","onUpdate:modelValue":e[5]||(e[5]=o=>l(s).unit=o),id:"js-unit"},null,512),[[p,l(s).unit]])])]),t("div",pt,[t("div",null,[_t,u(t("input",{type:"number",min:"0",class:"productModal-input","onUpdate:modelValue":e[6]||(e[6]=o=>l(s).price=o),id:"js-price"},null,512),[[p,l(s).price,void 0,{number:!0}]])]),t("div",null,[bt,u(t("input",{type:"number",min:"0",class:"productModal-input","onUpdate:modelValue":e[7]||(e[7]=o=>l(s).origin_price=o),id:"js-origin-price"},null,512),[[p,l(s).origin_price,void 0,{number:!0}]])])]),mt,t("div",ht,[gt,u(t("textarea",{class:"productModal-input","onUpdate:modelValue":e[8]||(e[8]=o=>l(s).description=o),id:"js-description",rows:"5"},`
                `,512),[[p,l(s).description]])]),t("div",vt,[ft,u(t("input",{class:"productModal-input","onUpdate:modelValue":e[9]||(e[9]=o=>l(s).content=o),id:"js-content"},null,512),[[p,l(s).content]])]),yt,u(t("input",{type:"checkbox",class:"productModal-input-checkbox","onUpdate:modelValue":e[10]||(e[10]=o=>l(s).is_enabled=o),id:"js-isEnabled"},null,512),[[E,l(s).is_enabled]])])])]),t("div",xt,[kt,l(b)==="editProduct"?(n(),i("button",{key:0,type:"button",class:"ml-4 btn-primary",onClick:e[11]||(e[11]=o=>r(l(s),l(s).id))},"確認編輯")):l(b)==="newProduct"?(n(),i("button",{key:1,type:"button",class:"ml-4 btn-primary",onClick:e[12]||(e[12]=o=>v(l(s)))},"確認新增")):U("",!0)])])])]))}},$t={class:"w-1/2 mx-auto"},Ut={class:"mx-auto my-20 flex flex-col"},wt=t("h1",{class:"text-5xl"},"產品列表",-1),jt={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},St={class:"py-2 inline-block min-w-full sm:px-6 lg:px-8"},Pt={class:"overflow-hidden"},Ct={class:"flex justify-end"},Vt=t("i",{class:"fa-solid fa-square-plus text-lg"},null,-1),Bt=[Vt],At={class:"min-w-full"},Et=t("thead",{class:"bg-white border-b"},[t("tr",null,[t("th",{scope:"col",class:"t-head-th"}," 產品名稱 "),t("th",{scope:"col",class:"t-head-th"}," 原價 "),t("th",{scope:"col",class:"t-head-th"}," 售價 "),t("th",{scope:"col",class:"t-head-th"}," 是否啟用 "),t("th",{scope:"col",class:"t-head-th"}," 刪除/編輯 ")])],-1),Nt={class:"t-body-td"},Dt={class:"t-body-td"},Lt={class:"t-body-td"},Ot={class:"t-body-td"},qt={key:0,class:"text-lg text-green-600 font-bold"},Ft={key:1,class:"text-lg font-bold"},It={class:"t-body-td"},Jt=["onClick"],Rt=t("i",{class:"fa-solid fa-trash"},null,-1),Tt=[Rt],zt=["onClick"],Gt=t("i",{class:"fa-solid fa-pen-to-square"},null,-1),Ht=[Gt],Wt={__name:"AdminView",setup(k){const m=y(),h=y({}),s=y("");L(async()=>{m.value=await w().then(a=>a.data.products).catch(a=>console.log(a))});const b=(a,_)=>{h.value=JSON.parse(JSON.stringify(a)),s.value=_},c=async()=>{m.value=await w().then(a=>a.data.products).catch(a=>console.log(a))},g=a=>{q(a).then(()=>{alert("刪除成功"),c()}).catch(_=>console.log(_))};return(a,_)=>(n(),i("div",$t,[t("div",Ut,[wt,t("div",jt,[t("div",St,[t("div",Pt,[t("div",Ct,[t("button",{onClick:_[0]||(_[0]=r=>b({},"newProduct")),"data-bs-toggle":"modal","data-bs-target":"#staticBackdrop",type:"button","data-mdb-ripple":"true","data-mdb-ripple-color":"light",class:"btn-primary"},Bt)]),t("table",At,[Et,t("tbody",null,[(n(!0),i(j,null,S(m.value,r=>(n(),i("tr",{key:r.id,class:"t-body-tr"},[t("td",Nt,x(r.title),1),t("td",Dt,x(r.origin_price),1),t("td",Lt,x(r.price),1),t("td",Ot,[r.is_enabled?(n(),i("p",qt,"啟用")):(n(),i("p",Ft,"未啟用"))]),t("td",It,[t("button",{type:"button",class:"t-btn-delete",onClick:v=>g(r.id)},Tt,8,Jt),t("button",{onClick:v=>b(r,"editProduct"),"data-bs-toggle":"modal","data-bs-target":"#staticBackdrop",type:"button","data-mdb-ripple":"true","data-mdb-ripple-color":"light",class:"t-btn-edit"},Ht,8,zt)])]))),128))])])])])])]),O(Mt,{product:h.value,onUpdate:c,modalStatus:s.value},null,8,["product","modalStatus"])]))}};export{Wt as default};
